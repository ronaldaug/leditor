class VToast{constructor(t){this.defaultOption={duration:2e3,delay:0},this.toastBottom=0,this.defaultStyle="transition:all ease 0.4s; padding:10px; border-radius:4px; position:fixed; z-index:999; box-shadow:0 1px 10px #ddd;",this.options=Object.assign(this.defaultOption,t)}success(t,e){this.showToast("success",t,e)}error(t,e){this.showToast("error",t,e)}info(t,e){this.showToast("info",t,e)}warning(t,e){this.showToast("warning",t,e)}randomId(){let t="",e="abcdefghijklmnopqrstuvwxyz";for(let o=0;o<5;o++)t+=e.charAt(Math.floor(26*Math.random()));return t}caculateToastsHeight(){let t=document.querySelectorAll(".v-toast"),e=0;t.forEach((t=>{e+=t.offsetHeight+20})),this.toastBottom=`bottom:${e+20}px`}getToastColor(t){return{success:{color:"#fff",background:"#17bc6d"},error:{color:"#fff",background:"#e94f75"},warning:{color:"#232323",background:"#ffe16c"},info:{color:"#232323",background:"#b7c1ff;"}}[t]}showToast(t,e,o=null){o&&(this.options=Object.assign(this.defaultOption,o)),this.msg=e,this.toastColor=this.getToastColor(t),this.caculateToastsHeight(),this.initToast()}initToast(){this.showStyle=`${this.defaultStyle} ${this.toastBottom}; right:10px; color:${this.toastColor.color}; background:${this.toastColor.background};`,this.hideStyle=`${this.defaultStyle} bottom:-200px; right:10px; color:${this.toastColor.color}; background:${this.toastColor.background};`;let t=document.createElement("div"),e=this.randomId();t.id=e,t.className="v-toast",t.setAttribute("style",this.hideStyle),t.innerText=this.msg,document.body.append(t);let o=document.querySelector(`#${e}`);setTimeout((()=>{o.setAttribute("style",this.showStyle)}),this.options.delay),setTimeout((()=>{o.setAttribute("style",this.hideStyle)}),this.options.duration),setTimeout((()=>{o.remove()}),this.options.duration+100)}}const Msg=new VToast;class LEHooks{constructor(){this.hooks={}}callHook(t,...e){this.hooks[t]&&this.hooks[t].forEach((t=>{t(...e)}))}addHook(t,e){this.hooks[t]||(this.hooks[t]=[]),this.hooks[t].push(e)}}class Leditor extends LEHooks{constructor(t,e){super();let o='<svg class="ticon" width="476pt" height="476pt" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52.974 52.974"><path d="M49.467 3.51c-4.677-4.679-12.291-4.681-16.97 0l-9.192 9.192c-.391.391-.391 1.023 0 1.414s1.023.391 1.414 0l9.192-9.192c1.88-1.88 4.391-2.915 7.07-2.915 2.681 0 5.191 1.036 7.071 2.916s2.916 4.391 2.916 7.071c0 2.68-1.036 5.19-2.916 7.07L36.033 31.088c-3.898 3.898-10.244 3.898-14.143 0-.391-.391-1.023-.391-1.414 0s-.391 1.023 0 1.414c2.34 2.339 5.412 3.509 8.485 3.509s6.146-1.17 8.485-3.509L49.467 20.48c2.258-2.258 3.502-5.271 3.502-8.485 0-3.214-1.244-6.227-3.502-8.485z"/><path d="M26.84 40.279l-7.778 7.778c-1.88 1.88-4.391 2.916-7.071 2.916-2.68 0-5.19-1.036-7.071-2.916-3.898-3.898-3.898-10.243 0-14.142l11.314-11.314c3.899-3.898 10.244-3.896 14.142 0 .391.391 1.023.391 1.414 0s.391-1.023 0-1.414c-4.677-4.679-12.291-4.681-16.97 0L3.505 32.502C1.247 34.76.004 37.773.004 40.987c0 3.214 1.244 6.227 3.502 8.484s5.271 3.502 8.484 3.502c3.215 0 6.228-1.244 8.485-3.502l7.778-7.778c.391-.391.391-1.023 0-1.414s-1.022-.39-1.413 0z"/></svg>';this.currentSelection,this.tooltip,this.default_options={menus:["bold","underline","italic","link","unlink","image","h1","h2","p","quote","strike","left","center","right"]},this.options=Object.assign(this.default_options,e),this.formatBlock=["h1","h2","p","blockquote"],"object"==typeof t&&(this.leditor=t),"string"==typeof t&&(this.leditor=document.querySelector(t));const i=`<div class="link-box"><input class="le-keep-tooltip" /><button class="add-link-btn">${o}</button></div>`,s=`<div class="image-box"><input class="le-keep-tooltip" /><button class="add-image-url-btn">${o}</button><label class="le-keep-tooltip"><svg class="ticon imgicon le-keep-tooltip" width="476pt" height="476pt" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path class="le-keep-tooltip" fill="#fff" d="M0 0h24v24H0z"/><path class="le-keep-tooltip" d="M21 16v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-2m18-2V4a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v14m18-2-5.517-3.678a1 1 0 0 0-1.002-.063L3 18" stroke="#000" stroke-linejoin="round"/><circle class="le-keep-tooltip" cx="8" cy="9" r="2" stroke="#000" stroke-linejoin="round"/></svg><input type="file" class="le-keep-tooltip le-upload-image" style="display:none">\n       </label></div>`,n=t=>this.options.menus.includes(t);this.menus=`${i} ${s} \n        <div class="tool-wrap">\n            ${n("bold")?'<button data-com="bold"><b data-com="bold">B</b></button>':""} \n            ${n("underline")?'<button data-com="underline"><u data-com="underline">U</u></button>':""} \n            ${n("italic")?'<button data-com="italic"><i data-com="italic">I</i></button>':""} \n            ${n("link")?'<button data-com="link"><svg class="ticon" width="476pt" height="476pt"  data-com="link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52.974 52.974"><path data-com="link" d="M49.467 3.51c-4.677-4.679-12.291-4.681-16.97 0l-9.192 9.192c-.391.391-.391 1.023 0 1.414s1.023.391 1.414 0l9.192-9.192c1.88-1.88 4.391-2.915 7.07-2.915 2.681 0 5.191 1.036 7.071 2.916s2.916 4.391 2.916 7.071c0 2.68-1.036 5.19-2.916 7.07L36.033 31.088c-3.898 3.898-10.244 3.898-14.143 0-.391-.391-1.023-.391-1.414 0s-.391 1.023 0 1.414c2.34 2.339 5.412 3.509 8.485 3.509s6.146-1.17 8.485-3.509L49.467 20.48c2.258-2.258 3.502-5.271 3.502-8.485 0-3.214-1.244-6.227-3.502-8.485z"/><path d="M26.84 40.279l-7.778 7.778c-1.88 1.88-4.391 2.916-7.071 2.916-2.68 0-5.19-1.036-7.071-2.916-3.898-3.898-3.898-10.243 0-14.142l11.314-11.314c3.899-3.898 10.244-3.896 14.142 0 .391.391 1.023.391 1.414 0s.391-1.023 0-1.414c-4.677-4.679-12.291-4.681-16.97 0L3.505 32.502C1.247 34.76.004 37.773.004 40.987c0 3.214 1.244 6.227 3.502 8.484s5.271 3.502 8.484 3.502c3.215 0 6.228-1.244 8.485-3.502l7.778-7.778c.391-.391.391-1.023 0-1.414s-1.022-.39-1.413 0z"/></svg></button>':""} \n            ${n("unlink")?'<button data-com="unlink"><svg class="ticon" width="476pt" height="476pt"  data-com="unlink" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52.974 52.974"><path data-com="unlink" d="M49.467 3.51c-4.677-4.679-12.291-4.681-16.97 0l-9.192 9.192c-.391.391-.391 1.023 0 1.414s1.023.391 1.414 0l9.192-9.192c1.88-1.88 4.391-2.915 7.07-2.915 2.681 0 5.191 1.036 7.071 2.916s2.916 4.391 2.916 7.071c0 2.68-1.036 5.19-2.916 7.07L36.033 31.088c-3.898 3.898-10.244 3.898-14.143 0-.391-.391-1.023-.391-1.414 0s-.391 1.023 0 1.414c2.34 2.339 5.412 3.509 8.485 3.509s6.146-1.17 8.485-3.509L49.467 20.48c2.258-2.258 3.502-5.271 3.502-8.485 0-3.214-1.244-6.227-3.502-8.485z"/><path d="M26.84 40.279l-7.778 7.778c-1.88 1.88-4.391 2.916-7.071 2.916-2.68 0-5.19-1.036-7.071-2.916-3.898-3.898-3.898-10.243 0-14.142l11.314-11.314c3.899-3.898 10.244-3.896 14.142 0 .391.391 1.023.391 1.414 0s.391-1.023 0-1.414c-4.677-4.679-12.291-4.681-16.97 0L3.505 32.502C1.247 34.76.004 37.773.004 40.987c0 3.214 1.244 6.227 3.502 8.484s5.271 3.502 8.484 3.502c3.215 0 6.228-1.244 8.485-3.502l7.778-7.778c.391-.391.391-1.023 0-1.414s-1.022-.39-1.413 0zM33.969 44.009c-.553 0-1 .447-1 1v6c0 .553.447 1 1 1s1-.447 1-1v-6c0-.553-.447-1-1-1zM38.433 42.302c-.391-.391-1.023-.391-1.414 0s-.391 1.023 0 1.414l4.243 4.242c.195.195.451.293.707.293s.512-.098.707-.293c.391-.391.391-1.023 0-1.414l-4.243-4.242zM44.969 38.009h-6c-.553 0-1 .447-1 1s.447 1 1 1h6c.553 0 1-.447 1-1s-.447-1-1-1zM15.969 11.009c.553 0 1-.447 1-1v-6c0-.553-.447-1-1-1s-1 .447-1 1v6c0 .553.448 1 1 1zM11.504 12.716c.195.195.451.293.707.293s.512-.098.707-.293c.391-.391.391-1.023 0-1.414L8.676 7.06c-.391-.391-1.023-.391-1.414 0s-.391 1.023 0 1.414l4.242 4.242zM4.969 17.009h6c.553 0 1-.447 1-1s-.447-1-1-1h-6c-.553 0-1 .447-1 1s.448 1 1 1z"/></svg></button>':""} \n            ${n("image")?'<button data-com="image"><svg class="ticon imgicon" width="476pt" height="476pt" data-com="image" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path data-com="image" fill="#fff" d="M0 0h24v24H0z"/><path data-com="image" d="M21 16v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-2m18-2V4a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v14m18-2-5.517-3.678a1 1 0 0 0-1.002-.063L3 18" stroke="#000" stroke-linejoin="round"/><circle data-com="image" cx="8" cy="9" r="2" stroke="#000" stroke-linejoin="round"/></svg></button>':""} \n            ${n("h1")?'<button data-com="h1">H1</button>':""} \n            ${n("h2")?'<button data-com="h2">H2</button>':""}\n            ${n("p")?'<button data-com="p"><small data-com="p">P</small></button>':""}\n            ${n("quote")?'<button data-com="blockquote"><svg class="ticon" width="476pt" height="476pt"  data-com="blockquote" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><path data-com="blockquote" d="M50.6292648 26.225668c-.1288986-1.3934994-.0303001-5.1816006 3.5985985-10.4492006.2745018-.3975.2247009-.9335995-.1161957-1.2743998-1.4795036-1.4794998-2.395504-2.4131002-3.0379982-3.0663996-.8448029-.8614006-1.2305031-1.2539005-1.795002-1.7657003-.3769035-.3388004-.9472008-.3446999-1.3281021-.0125999-6.3251991 5.5038996-13.3505974 16.8768997-12.3339958 30.8105011.5956955 8.1815987 6.5634956 14.1200981 14.1894951 14.1200981 7.8260994 0 14.1932983-6.3661995 14.1932983-14.1923981 0-7.5498009-5.9256935-13.7412015-13.3700981-14.1699009zm-.8232002 26.3622989c-6.5489006 0-11.6767998-5.1581993-12.1953011-12.2645988v-.0009995c-1.1435966-15.6709003 8.1718025-25.8496017 10.9863014-28.5449009.2743988.2705002.5878983.5887995 1.0498009 1.0594997.5565987.5664005 1.3183975 1.3417997 2.4706993 2.4981003-4.4053001 6.7870998-3.5741997 11.6229992-3.2099991 12.3164005.1728973.3290997.5273972.5508003.8984985.5508003 6.7236023 0 12.1932983 5.469698 12.1932983 12.1933002 1e-7 6.7226984-5.4696959 12.1923982-12.1932982 12.1923982zM15.1136675 26.225668c-.1299-1.3896008-.0341997-5.1748009 3.5985994-10.4492006.2735004-.3975.2245998-.9335995-.1161995-1.2743998-1.4766006-1.4765997-2.3915997-2.4091997-3.0332003-3.0625-.8476-.8633003-1.2343998-1.2568998-1.7987995-1.7695999-.3769999-.3388004-.9473-.3437004-1.3281002-.0136003-6.3251996 5.5039005-13.3515997 16.875-12.3369999 30.8115005v.0009995c.5977 8.1805992 6.5664001 14.1190987 14.1924 14.1190987 7.8261995 0 14.1934004-6.3661995 14.1934004-14.1923981 0-7.5507003-5.9258003-13.7431003-13.3711004-14.1699zm-.8223 26.3622989c-6.5478001 0-11.6786995-5.1581993-12.1982002-12.2655983v.0009995c-1.1406-15.6748009 8.1747999-25.8516006 10.9892006-28.5459003.2754002.2705002.5899.5908003 1.0528002 1.0625.5555992.5663996 1.3163996 1.3408003 2.4667988 2.4951-4.4052992 6.7880993-3.5741997 11.6229992-3.2099991 12.3153992.1729002.3291016.5283003.5518017.8993998.5518017 6.7237005 0 12.1934004 5.469698 12.1934004 12.1933002-1e-7 6.7226982-5.4696999 12.192398-12.1934005 12.192398z"/></svg></button>':""}\n            ${n("strike")?'<button data-com="strikethrough"><strike data-com="strikethrough">s</strike></button>':""}\n            ${n("left")?'<button data-com="justifyLeft"><svg class="ticon" width="476pt" height="476pt"  data-com="justifyLeft" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22.916 22.916"><path data-com="justifyLeft" d="M11.458 22.828H.5c-.276 0-.5-.224-.5-.5s.224-.5.5-.5h10.958c.276 0 .5.224.5.5s-.224.5-.5.5zM22.416 15.582H.5c-.276 0-.5-.224-.5-.5s.224-.5.5-.5h21.916c.276 0 .5.224.5.5s-.224.5-.5.5zM22.416 8.335H.5c-.276 0-.5-.224-.5-.5s.224-.5.5-.5h21.916c.276 0 .5.224.5.5s-.224.5-.5.5zM22.416 1.088H.5c-.276 0-.5-.224-.5-.5s.224-.5.5-.5h21.916c.276 0 .5.224.5.5s-.224.5-.5.5z"/></svg></button>':""}\n            ${n("center")?'<button data-com="justifyCenter"><svg class="ticon" width="476pt" height="476pt"  data-com="justifyCenter" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22.914 22.914"><path data-com="justifyCenter" d="M17.719 22.827H5.195c-.276 0-.5-.224-.5-.5s.224-.5.5-.5h12.523c.276 0 .5.224.5.5s-.223.5-.499.5zM22.414 15.581H.5c-.276 0-.5-.224-.5-.5s.224-.5.5-.5h21.914c.276 0 .5.224.5.5s-.224.5-.5.5zM17.719 8.334H5.195c-.276 0-.5-.224-.5-.5s.224-.5.5-.5h12.523c.276 0 .5.224.5.5s-.223.5-.499.5zM22.414 1.087H.5c-.276 0-.5-.224-.5-.5s.224-.5.5-.5h21.914c.276 0 .5.224.5.5s-.224.5-.5.5z"/></svg></button>':""}\n            ${n("right")?'<button data-com="justifyRight"><svg class="ticon" width="476pt" height="476pt"  data-com="justifyRight" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22.916 22.916"><path data-com="justifyRight" d="M22.059 22.828H11.101c-.276 0-.5-.224-.5-.5s.224-.5.5-.5h10.958c.276 0 .5.224.5.5s-.224.5-.5.5zM22.416 15.582H.5c-.276 0-.5-.224-.5-.5s.224-.5.5-.5h21.916c.276 0 .5.224.5.5s-.224.5-.5.5zM22.416 8.335H.5c-.276 0-.5-.224-.5-.5s.224-.5.5-.5h21.916c.276 0 .5.224.5.5s-.224.5-.5.5zM22.416 1.088H.5c-.276 0-.5-.224-.5-.5s.224-.5.5-.5h21.916c.276 0 .5.224.5.5s-.224.5-.5.5z"/></svg></button></div>':""}\n            `,this.init()}pasteHtmlAtCaret(t){var e,o;if(window.getSelection){if((e=window.getSelection()).getRangeAt&&e.rangeCount){o=e.getRangeAt(0);var i=document.createElement("div");i.innerHTML=t;for(var s,n,l=document.createDocumentFragment();s=i.firstChild;)n=l.appendChild(s);o.insertNode(l),n&&((o=o.cloneRange()).setStartAfter(n),o.collapse(!0),e.removeAllRanges(),e.addRange(o))}}else document.selection&&"Control"!=document.selection.type&&document.selection.createRange().pasteHTML(t)}getTextWidthAndHeight=()=>{let t,e=document.selection,o=0,i=0;if(e)"Control"!=e.type&&(t=e.createRange(),o=t.boundingWidth,i=t.boundingHeight);else if(window.getSelection&&(e=window.getSelection(),e.rangeCount&&(t=e.getRangeAt(0).cloneRange(),t.getBoundingClientRect))){const e=t.getBoundingClientRect();o=e.right-e.left,i=e.bottom-e.top}return{textWidth:o,textHeight:i}};getCursorPos=t=>{var e,o,i=document.selection,s=0,n=0;if(i)"Control"!=i.type&&((e=i.createRange()).collapse(!0),s=e.boundingLeft,n=e.boundingTop);else if(window.getSelection&&(i=window.getSelection()).rangeCount&&((e=i.getRangeAt(0).cloneRange()).getClientRects&&(e.collapse(!0),e.getClientRects().length>0&&(s=(o=e.getClientRects()[0]).left,n=o.top)),0==s&&0==n)){var l=document.createElement("span");if(l.getClientRects){l.appendChild(document.createTextNode("â€‹")),e.insertNode(l),s=(o=l.getClientRects()[0]).left,n=o.top;var c=l.parentNode;c.removeChild(l),c.normalize()}}return{x:s,y:n}};removeModal=()=>{let t=document.querySelector(".popup-modal");t&&t.remove()};removeToolTip=()=>{if(!this.tooltip)return;this.tooltip.remove();const t=this.leditor.querySelectorAll(".le-tmp-element");t.length>0&&t.forEach((t=>t.outerHTML=t.innerHTML)),this.callHook("tooltip:close")};appendToolTip=()=>{let t=document.createElement("div");t.className="tooltip",t.innerHTML=this.menus,document.body.append(t);let{x:e,y:o}=this.getCursorPos(t),i=e,s=o;const{textWidth:n,textHeight:l}=this.getTextWidthAndHeight(),c=n/2,r=t.offsetWidth,a=r/2,d=t.offsetHeight,h=window.innerWidth||document.documentElement.clientWidth;e-=a,e+=c,o-=d+10,a>=i&&(e=0),d>=s&&(o=l+10),i+a>=h&&0!==e&&(e=h-(r+18)),t.setAttribute("style",`animation:bounceIn 0.4s;top:${o}px;left:${e}px`),this.tooltip=t};showLinkBox(){if(!this.currentSelection.toString())return void Msg.error("Please select text!");this.tooltip.classList.add("add-link");const t=this.tooltip.querySelector(".link-box input"),e=this.tooltip.querySelector(".link-box .add-link-btn");document.execCommand("createLink",!1,"#"),this.currentSelection.anchorNode.parentElement.className="le-tmp-element",e.addEventListener("click",(()=>{let e=document.querySelector(".le-tmp-element");t.value?(e.href=t.value,e.removeAttribute("class"),this.removeToolTip()):Msg.error("Please add url!")}))}insertImage=t=>{let e=new FileReader;e.onload=function(){document.querySelector(".le-temp-place").outerHTML=`<img src="${e.result}">`},e.readAsDataURL(t.target.files[0])};showImageBox(){this.tooltip.classList.add("add-image"),this.pasteHtmlAtCaret('<span class="le-temp-place" style="opacity:0;visibility:hidden"></span>');this.tooltip.querySelector(".add-image-url-btn").addEventListener("click",(t=>{const e=this.tooltip.querySelector(".image-box input");if(!e.value)return void Msg.error("Please add image url");document.querySelector(".le-temp-place").outerHTML=`<img src="${e.value}">`}));this.tooltip.querySelector("input.le-upload-image").addEventListener("change",(t=>{this.insertImage(t)}))}enableImageResizeInDiv(){if(!/chrome/i.test(navigator.userAgent)||!/google/i.test(window.navigator.vendor))return;let t,e=!1;const o=function(t,e,o){let s=document.createElement(t);return s.className=e,i(s,o),s},i=function(t,e){for(let o in e)t.style[o]=e[o];return t},s=()=>{document.querySelectorAll(".resize-frame,.resizer").forEach((t=>t.parentNode.removeChild(t)))},n=t=>{const e=t.getBoundingClientRect(),o=window.pageXOffset||document.documentElement.scrollLeft,i=window.pageYOffset||document.documentElement.scrollTop;return{top:e.top+i,left:e.left+o}},l=l=>{s(),t=l;const c=l.offsetHeight,a=l.offsetWidth,d=l.offsetTop,h=l.offsetLeft,p=this.leditor.scrollTop,u=this.leditor.scrollLeft,g=d-p-1,m=h-u-1,f=o("div","positioner",{position:"absolute",background:"#fff",boxShadow:"0 1px 6px #ddd",top:g+"px",left:m+a/2+"px",display:"flex",marginLeft:"-28px",marginTop:"-36px",justifyContent:"space-around",zIndex:1});f.innerHTML='<svg class="imgicon positioner-img" width="476pt" height="476pt" data-col="left" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M501.333 213.333h-192c-5.896 0-10.667 4.771-10.667 10.667s4.771 10.667 10.667 10.667h192c5.896 0 10.667-4.771 10.667-10.667s-4.771-10.667-10.667-10.667zM501.333 320H10.667C4.771 320 0 324.771 0 330.667s4.771 10.667 10.667 10.667h490.667c5.896 0 10.667-4.771 10.667-10.667C512 324.771 507.229 320 501.333 320zM330.667 426.667h-320C4.771 426.667 0 431.438 0 437.333 0 443.229 4.771 448 10.667 448h320c5.896 0 10.667-4.771 10.667-10.667-.001-5.895-4.771-10.666-10.667-10.666zM309.333 128h192c5.896 0 10.667-4.771 10.667-10.667s-4.771-10.667-10.667-10.667h-192c-5.896 0-10.667 4.771-10.667 10.667.001 5.896 4.772 10.667 10.667 10.667zM10.667 256h234.667c5.896 0 10.667-4.771 10.667-10.667V74.667C256 68.771 251.229 64 245.333 64H10.667C4.771 64 0 68.771 0 74.667v170.667C0 251.229 4.771 256 10.667 256zm224-21.333H25.75l48.917-48.917 35.125 35.125c4.167 4.167 10.917 4.167 15.083 0s4.167-10.917 0-15.083l-3.125-3.125 48.917-48.917 64 64v16.917zM21.333 85.333h213.333v102.25l-56.458-56.458c-4.167-4.167-10.917-4.167-15.083 0l-56.458 56.458-24.458-24.458c-4.167-4.167-10.917-4.167-15.083 0l-45.792 45.792V85.333z"/><path d="M106.667 149.333c11.76 0 21.333-9.573 21.333-21.333s-9.573-21.333-21.333-21.333c-11.76 0-21.333 9.573-21.333 21.333s9.572 21.333 21.333 21.333zM117.333 128h-10.656s-.01-.01-.01-.021l10.666.021z"/></svg><svg class="imgicon positioner-img" width="476pt" height="476pt" data-col="center"  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M501.333 213.333h-64c-5.896 0-10.667 4.771-10.667 10.667s4.771 10.667 10.667 10.667h64c5.896 0 10.667-4.771 10.667-10.667s-4.771-10.667-10.667-10.667zM501.333 320H10.667C4.771 320 0 324.771 0 330.667s4.771 10.667 10.667 10.667h490.667c5.896 0 10.667-4.771 10.667-10.667C512 324.771 507.229 320 501.333 320zM330.667 426.667h-320C4.771 426.667 0 431.438 0 437.333 0 443.229 4.771 448 10.667 448h320c5.896 0 10.667-4.771 10.667-10.667-.001-5.895-4.771-10.666-10.667-10.666zM437.333 128h64c5.896 0 10.667-4.771 10.667-10.667s-4.771-10.667-10.667-10.667h-64c-5.896 0-10.667 4.771-10.667 10.667.001 5.896 4.772 10.667 10.667 10.667zM12.354 234.667h64c5.896 0 10.667-4.771 10.667-10.667s-4.771-10.667-10.667-10.667h-64c-5.896 0-10.667 4.771-10.667 10.667s4.771 10.667 10.667 10.667zM12.354 128h64c5.896 0 10.667-4.771 10.667-10.667s-4.771-10.667-10.667-10.667h-64c-5.896 0-10.667 4.771-10.667 10.667C1.688 123.229 6.458 128 12.354 128zM138.667 256h234.667c5.896 0 10.667-4.771 10.667-10.667V74.667C384 68.771 379.229 64 373.333 64H138.667C132.771 64 128 68.771 128 74.667v170.667c0 5.895 4.771 10.666 10.667 10.666zm224-21.333H153.741l48.926-48.917 35.125 35.125c4.167 4.167 10.917 4.167 15.083 0s4.167-10.917 0-15.083l-3.125-3.125 48.917-48.917 64 64v16.917zM149.333 85.333h213.333v102.25l-56.458-56.458c-4.167-4.167-10.917-4.167-15.083 0l-56.458 56.458-24.458-24.458c-4.167-4.167-10.917-4.167-15.083 0l-45.792 45.784V85.333z"/><path d="M234.667 149.333C246.438 149.333 256 139.76 256 128s-9.563-21.333-21.333-21.333c-11.771 0-21.333 9.573-21.333 21.333s9.562 21.333 21.333 21.333zm0-21.354l10.666.021h-10.667c.001 0 .001-.01.001-.021z"/></svg><svg style="transform:scaleX(-1)" class="imgicon positioner-img" width="476pt" height="476pt" data-col="right" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M501.333 213.333h-192c-5.896 0-10.667 4.771-10.667 10.667s4.771 10.667 10.667 10.667h192c5.896 0 10.667-4.771 10.667-10.667s-4.771-10.667-10.667-10.667zM501.333 320H10.667C4.771 320 0 324.771 0 330.667s4.771 10.667 10.667 10.667h490.667c5.896 0 10.667-4.771 10.667-10.667C512 324.771 507.229 320 501.333 320zM330.667 426.667h-320C4.771 426.667 0 431.438 0 437.333 0 443.229 4.771 448 10.667 448h320c5.896 0 10.667-4.771 10.667-10.667-.001-5.895-4.771-10.666-10.667-10.666zM309.333 128h192c5.896 0 10.667-4.771 10.667-10.667s-4.771-10.667-10.667-10.667h-192c-5.896 0-10.667 4.771-10.667 10.667.001 5.896 4.772 10.667 10.667 10.667zM10.667 256h234.667c5.896 0 10.667-4.771 10.667-10.667V74.667C256 68.771 251.229 64 245.333 64H10.667C4.771 64 0 68.771 0 74.667v170.667C0 251.229 4.771 256 10.667 256zm224-21.333H25.75l48.917-48.917 35.125 35.125c4.167 4.167 10.917 4.167 15.083 0s4.167-10.917 0-15.083l-3.125-3.125 48.917-48.917 64 64v16.917zM21.333 85.333h213.333v102.25l-56.458-56.458c-4.167-4.167-10.917-4.167-15.083 0l-56.458 56.458-24.458-24.458c-4.167-4.167-10.917-4.167-15.083 0l-45.792 45.792V85.333z"/><path d="M106.667 149.333c11.76 0 21.333-9.573 21.333-21.333s-9.573-21.333-21.333-21.333c-11.76 0-21.333 9.573-21.333 21.333s9.572 21.333 21.333 21.333zM117.333 128h-10.656s-.01-.01-.01-.021l10.666.021z"/></svg>',this.leditor.append(f);const x=()=>{this.leditor.querySelectorAll(".positioner").forEach((t=>t.remove()))};this.leditor.querySelectorAll("svg.positioner-img").forEach((t=>{t.addEventListener("click",(t=>{t.stopPropagation();const e=t.target.dataset.col;"left"==e&&l.setAttribute("style","float:left;"),"center"==e&&l.setAttribute("style","display:block;margin:0 auto;"),"right"==e&&l.setAttribute("style","float:right;"),x()}))})),this.leditor.append(o("span","resize-frame",{margin:"10px",position:"absolute",top:g+c-10+"px",left:m+a-10+"px",borderRight:"4px solid #000",borderBottom:"4px solid #000",width:"8px",height:"8px",cursor:"se-resize",zIndex:1})),this.leditor.append(o("span","resizer top-border",{position:"absolute",top:g+"px",left:m+"px",border:"dashed 1px grey",width:a+"px",height:"0px"})),this.leditor.append(o("span","resizer left-border",{position:"absolute",top:g+"px",left:m+"px",border:"dashed 1px grey",width:"0px",height:c+"px"})),this.leditor.append(o("span","resizer right-border",{position:"absolute",top:g+"px",left:m+a+"px",border:"dashed 1px grey",width:"0px",height:c+"px"})),this.leditor.append(o("span","resizer bottom-border",{position:"absolute",top:g+c+"px",left:m+"px",border:"dashed 1px grey",width:a+"px",height:"0px"})),document.querySelector(".resize-frame").onmousedown=()=>(e=!0,x(),!1),this.leditor.onmouseup=()=>{e&&(t.style.width=document.querySelector(".top-border").offsetWidth+"px",t.style.height=document.querySelector(".left-border").offsetHeight+"px",r(),t.click(),e=!1)},this.leditor.onmousemove=o=>{if(t&&e){let e=o.pageY-n(t).top,s=o.pageX-n(t).left;e=e<1?1:e,s=s<1?1:s;const l=d-p-1,c=h-u-1;i(document.querySelector(".resize-frame"),{top:l+e-10+"px",left:c+s-10+"px"}),i(document.querySelector(".top-border"),{width:s+"px"}),i(document.querySelector(".left-border"),{height:e+"px"}),i(document.querySelector(".right-border"),{left:c+s+"px",height:e+"px"}),i(document.querySelector(".bottom-border"),{top:l+e+"px",width:s+"px"})}return!1}},c=()=>{this.leditor.querySelectorAll("img").forEach(((t,e)=>{t.onclick=e=>{e.target===t&&l(t)}}))},r=()=>{if(c(),s(),!t)return;const e=t,i=e.offsetHeight,n=e.offsetWidth,l=e.offsetTop,r=e.offsetLeft,a=l-this.leditor.scrollTop-1,d=r-this.leditor.scrollLeft-1;this.leditor.append(o("span","resize-frame",{position:"absolute",top:a+i+"px",left:d+n+"px",border:"solid 2px red",width:"6px",height:"6px",cursor:"se-resize",zIndex:1})),this.leditor.append(o("span","resizer",{position:"absolute",top:a+"px",left:d+"px",border:"dashed 1px grey",width:n+"px",height:"0px"})),this.leditor.append(o("span","resizer",{position:"absolute",top:a+"px",left:d+n+"px",border:"dashed 1px grey",width:"0px",height:i+"px"})),this.leditor.append(o("span","resizer",{position:"absolute",top:a+i+"px",left:d+"px",border:"dashed 1px grey",width:n+"px",height:"0px"}))},a=()=>{null!=t&&(t=null,e=!1,s()),c()};this.leditor.addEventListener("scroll",(function(){a()}),!1),this.leditor.addEventListener("mouseup",(function(t){if(!e){const e=t.x?t.x:t.clientX,o=t.y?t.y:t.clientY;let i=document.elementFromPoint(e,o);if(i){let t=null;"IMG"===i.tagName&&(t=i),t?l(t):a()}}}))}highlightText(){this.currentSelection.toString()?this.removeToolTip():Msg.error("Please select text!")}runCommand(t){t&&(this.formatBlock.includes(t)?document.execCommand("formatBlock",!1,t):("link"==t&&this.showLinkBox(),"image"==t&&this.showImageBox(),document.execCommand(t,!1,null)))}init(){this.leditor.setAttribute("contenteditable","true"),this.leditor.classList.add("active-edit"),this.leditor.focus(),this.enableImageResizeInDiv(),document.body.addEventListener("click",(t=>{const e=t.target.dataset.com;if(this.tooltip&&this.tooltip.contains(t.target)&&t.target.classList.contains("le-keep-tooltip"))return;if(e)return void this.runCommand(e);if(this.removeToolTip(),this.currentSelection=window.getSelection(),this.currentSelection.toString())return void this.appendToolTip();2==t.detail&&this.appendToolTip(),this.leditor.contains(t.target)||this.tooltip.contains(t.target)||this.removeToolTip()}))}}